# post message example 'van-gogh-realism/5'

import json
import boto3
import base64
from boto3 import client
import requests
import os

def lambda_handler(event, context):
    artist = event["rawQueryString"].split("/")[0]
    counter = int(event["rawQueryString"].split("/")[1]) 
    
    bucket_name = "painterstorage"
    s3_path = "generated/image ({}).png"
    s3_new_path = "image ({}).png"
    s3 = boto3.resource("s3")
    
    url = "http://207.53.234.71:5000/generate_image/" + artist
    headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.76 Safari/537.36', "Upgrade-Insecure-Requests": "1","DNT": "1","Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language": "en-US,en;q=0.5","Accept-Encoding": "gzip, deflate"}
   
    image_base64 = b'123'
    
    images = []
    filename = "tempImage{}.png"
    
    os.chdir("/tmp")
    
    for i in range(0, counter):
        try:
            image_base64 = requests.get(url, headers = headers)
            image_base64 = image_base64.text.encode('utf8')
            image_name = filename.format(i)
            with open(image_name, "wb") as temp:
                temp.write(base64.decodebytes(image_base64))
            images.append(image_name)
        except:
            image_base64 = b'iVBORw0KGgoAAAANSUhEUgAAA5gAAAOEBAMAAAA28oNuAAAAElBMVEX/1Crm5uYAAAD/////9zCBcz1pX/yRAAAfM0lEQVR42uydXW7byBJGhUCzgIgbcGh7AZShd8GQ3zOy7/63cjNx/sNqdldXNavFQ2AeToCxAR+xWx+7WLV7er+mj+8X2DHu+EsgE0QmiEwQmcgEkQkiE0QmiExkgsgEkQkiE/xP5rd/Gb79E9gxIhOZIDJBZILIRCaITBCZIDJBZCITRCaITBCZ4FeZHAZyOA0iE0QmiExkgsgEkQkiE0QmMkFkgsgEkQkik7fAQA6nQWSCyEQmfxhkgsgEkQkiE5kgMkFkgsgEkYlMMLJMDgM5nAaRCSITRCYyQWSCyASRCSITmSAyQWSCyASRyVtgIIfTIDJBZCKTPwwyQWSCyASRiUwQmSAyQWSCyEQmGFkmh4EcToPIBJEJIhOZIDJBZILIBJGJTBCZIDJBZILI5C0wkMNpEJkgMpHJHwaZIDJBZGpwmp6QeQs4vOdrZN4APk3X8f16HJDZN/5Q+fX6F5kd42H8/XocJmR2itfxr+vdJjJ7w2mcu14nZPaH8y7fbd6mzNs933sapWvgcLoznNsvv1/I7AyPssvxEZld4TSmrntk9oTXpMxxQGY/eEy7HB8nZHaD49L1isxe8Lgo89uticzwOI1j5q2JzPB4zJD5fmsiMzyOY+6ticzoeMyS+TghswMcx+xbE5nBccqUeY/M+HjMlPnfOntbMm/vPHO4ZsocOZwOj7mr7JdNE5nR8Zgt8x6Z0fGQLXNEZnTMdzkOyIyNU4HMe2TGxmOBzE/IjI3XApkjMmNjicvvR9TIjImnIpn3yIyMhyKZ30uBkBkSx7JrQGZcnApl3iMzLh4LZX6akBkW54PJ58vlcp63eVMyb+s8c5gV9nbefbnOV+GNMA6nY+JJdvnFpnBygsyQOMwFk8dvLne759kXwpAZVObcvffw3eVuL5QbIDMizgaT80+Z1/lyA2RGxGNylZ1fZ++RGRJnS7l+rrK73Yu0ziIzHM4+y9v/InMvhRNkhsNTesv8IvODsM4iMxrOBpNfV1k5nCAznMzZJwa/ydwJmyYyo+G0tMrK4QSZ0XApmCTCCTJ7aMn1+5Y5H04ekRlP5twq+4dL6Ynejci8nfPM0/KW+eWaDSccTgfD2WBy95fM59lyA2QGk5kRTKRwgsxgOGWtsvOb5isyY2FOMBGf6CEzFA45wSQRTpAZSebSiclyuQEyo2BeMJGe6N0jMxDOB5Pd3DUbTpAZSWZmMJEqLpEZCXNX2US5ATKDYGYwkZ/oITMMZgeTdC00MkPIzA0mC+EEmQHwlL9lpmqheQssAh6zTkzSJyccTgfB/GAi1kIjMwhOJausFE6QGQNLgolcboDMEHgoCCbJTROZ62NJMBGf6CEzBJ7KtkwpnCAzAh6zT0yWNk1kro5lwUQsN5iQuT5OpausHE6QuTaWBhOx3ACZq+NQGkwS4QSZa8ssDSaJcILMlfFUvmVKtdDIXBmH8mAih5POZfZ/nnktDiZyLTSH0+vilPNaZm65ATLXRUUwST7RQ+aKqAkmYneDCZmr4qjaMlPlBshcC1XBJF1ugMynQB3273JkyuUGyHwK1GE/Z8sUaqEnZK6Hk3aVTZQbIHMlVAaThXCCzFXwoF5lhXCCzPVQG0xS5QbIXAdP+i0zFU6QuQbqTkwWyg2QuQ5eK7bMRC10rzK7PsGbNEUGGd0NOJxeASuCyS0OU+ha5nCoWmXl7gbIjNlhX1FugMw1sCqYpLobIDNGh/27Ipm3NUyhZ5mVweT2hil0fWfqSrkyhtYgszlWBpNEOEFmczxUr7JSOEFmc6wNJnLrNWS2xupgIj/RQ2ZrrDoxSYcTZLbGq8GWma6FRmYzrDsxWS43+MhbYM3QIJgs9YXmcLoRDgeTVVYeQ43MhjItgsmNDVPoVqZJMEmNoUZmO6w+MUl3N0BmQxxsgkni5ASZzdDixGR50hsym6BRMLmtYQq9yjyYrbI3NEyhU5lmwSQdTpDZAu2CSTKcILMFmgWT9BM9ZDZAw2CSnPSGzAZoGEyS4QSZDdAwmCQ3zd5kdnmeeTBdZW9mmEKfMi2DSepFTWT642QaTBKt15Dpj9Zb5q0MU+hRpnEwEcsNkNlCpk0p1+0NU+hR5sl6lRXCCTL9cThYr7JiOEGmu0zrYCK3XkOmO1oHE7kWGpneeHTYMtO10Mj0QvtgIrdeQ6YzPtmemOTUQiPTC08eW2a6FhqZTugRTJY2zW5kdnee6RFMEk/0OJx2xMlplU29qInMeB32FessMl3x6rNl3sQwhe5k2p+YLPaFRmbEDvvaSW/IDNhh/9aHKfQm0ymYpMMJMl1w8ltlE5PekOmCbsEkUW6ATCd0CybJcIJMF/Q5MVma9IZMDzx5bpnyEz1keqDpa5n54QSZHugYTFKT3rqR2dV5pu8qK5YbcDgds8P+TQ9T6EqmazBJtF5DZqMO+3tTmX0PU+hJ5sl7y5S6GyAzaId9Tes1ZLZpyv5mLLPrYQodyZz8V9nOhyl0JNM/mEhDa5Bpju7BJF1ugExLdA8mcus1ZBrjqcWWmSg3QKYhNggmC7XQyDTDBsFkoRYamVY4tVll5XKDj7wFZoZNgknnwxR6kTk0CSYLL2oi00hmm2CS7AuNTCM8tdoyex6m0IvMRsGk72EKncgcGgWTRLkBMq1warfKJia9IdMEmwWTrocp9CGzXTCRyw2QaSWz4ZaZmPSGTAs8tdwy5XCCTAtsGUykcgNkGmHTLVN+oodMA5zarrLiEz1kGmDTYJIIJ+FldnCe6dXI8uaGKXQhszqY7C+Xy3//navCCTINsDKY7C/n/31bKT/n6pxvvYbMaqx8+f3y8utt9vlS0XoNmfUya4LJ/vzn//12rggnyKzEmmBy+Wfmpr7owwkyK7EimFzmburxca/bNB+RWY36YHKedZlVPHTucZhCfJnqYLI/j+K114UTZFaiOpgkXGbYfJY3TWRqcdCemCRdLttM1EIjUy1TGUwWXI6PF2W5ATL1OOm+wFyuCzKXHjskJr0hU4u6YDLb0KfsS5RcC41MJSpPTF7GjGuvDCdxZUY/o1MFk3OOy4WFdr4WmsPpClQFk5xFdvlD0d8whegyVScmL2Pmddb0hUZmyw77+2uuzAdVdwNkNuyw/zyOFrdmf8MUgsvUBJN9vsv0rilNekOmDjXB5KVAZvKDIU16Q2azDvv5O+bSD+tumEJsmapgUuIy/cj+Q2fDFELLVJVyPRfJTH40hNZryFTJVASTfZnL5Dor9CtFpgY1JybnQpkP5eEEmRrUBJPCVTb98+ZbryFTgapg8qFQ5ngufqKHTI1MTTApdTl+Lg4ncWUGPs+c3IOJatO853DaqMP+UjB5MZUpPtFDZilqTkyei2Xe3c4whcgynU9Mcr7OyuUGyCxCVSmXscy+hikElqkq5bKW+dLTMIXAMlWlXB+MZXY1TCGuTN1rmdZ3ZlfDFOLK1L38bi0zFU6QmY26d0zMZe7kdRaZ2agJJuY5MznpDZm5eNK9/G4uMxFOkJmLB91rmS/mMuVJb8jMReXL78bPZpNP9JCZidp+Mf+Yy5TDCW+BZaK2X4z9ndnRMIWgMvVduexl9jNMIapM9egve5li6zVk5qG6X8zeQabUeg2ZeajuyuUgs59hCkFlqtsFl8t80y3dyMxFfSNLD5nSpDdkZqG+kaXLnfncyTCFmDL17YJdZPYyTCGmTN2JSfnbmZk/V2i9hswcrOiw7yNzvvUaMnPwWNGU3UOmEE6QmYPqYGL94lA6nCAzA6tGf7nITJQbIDON+mDidmemaqF5CyzVlP1asWWW141kyUz0heZwurjD/n5dmTu5LzQyXTrsO8rsY5hCPJmDspTLo6dBZ8MUAsqsCSZuMl/kdRaZCaxaZb1kJia9IdO6w766oitX5gdxnUWm3GG/KpgoZFbc8Z+QuSBTf2KiKpzN/molbprIFLFyJnFxeV6uTDmcIFPC+WASQKYcTpApyqwLJuUyH2o240dkpnCqXWX3XjLFSW/IlLAymHjKvArrLDIFfKoMJo4yxXDCW2AlHfb3MWRK3Q04nLbssN9IptR6DZlCU/a6ExNNeV7+N+W9UG6ATEFmdTBxlCm1XkOmgNWrrKdMofUaMu067FcWzr5Vfk5ekSk0Za8OJuXleSU/er71GjLzO+zv48icn/SGzFmsDya+MqMPU4gk0yCYlNeNFMmcDSfInJVZH0x2poPd8lqvPSFzBieLVdZVZqoWGpm/oUUw8ZWZqoVG5q9oEkyc78xELTQyf5NpsmWWluedq3/4I2+B/Y0mwcRZZupFTQ6nf8FjbSmXRmbhnjxfboDMv/BqssoWFs6WfsGaf6KHzD9wqo30qvK84m/LQrkBMn9Dm2DiLTMx6Q2ZP/FgEkxKZZY+LdzL3Q2Q+RNtgklpEdCdxferKMMUwsg0CibuMuVJb8j8gUeLv3QLmVdp00TmD7xabZllMm0eF34NJ8j8gVarrLtMcWgNMr+jWTApLM97sPmwDMj8iYNZMHGXKbZeQ+ZkVv3cTOazEE6QOVm9Y6IsnH0w2pQn3gL7gUYnJuXleW9Gt/4rh9M/0CyYNJAZd5hCEJlWJybFdSMamWGHKcSQaRdMWsgUWq8h8x0PhqtsmUyzhfwemd/QLpg0kTnf3QCZX9EymLSQGXWYQgiZZicm5TLtnhi+InOwDiaF5Xlnu00TmYO0Ze4jy5TLDTYv0zSYNJGZqoXeuEzTYFJY0aWUmaiF3rhM02DSRGaqFnrbMm2DSZlM7Wp+lmuhty3T8sSktG5EKzOxaW76LbDharxltpApPNHb/OH0ZPdgpqFM+UXNTcs0DiaNZIp9oTctc7AOJkUy1Q8NQw5TWF+mdTBpIzPkMIXVZZoHk6LyPL1McdLblmVaB5MymQ+29/+wbZlP1sGklUwxnGz5zrQOJmXleRUy58sNNi3TPJg0k3kWNs0NyzQPJs1kSuFkwzLNg0lZ3ciD8a+537LMyTyYlMms+dwIT/S2K9M+mLSTKTzR267Mq8OW2UzmbLnBdt8CGxyCSTOZ8YYprCvTI5gUVXR9rvk98+UGm5XpEUyKZO531pvm61ZlDh7BpEimfaC936rMk0cwaSgz1Rd6czJ9tsyS8ry6XyaXG2xP5uASTFrKFMsNtifzySWYNJQZbZjCmjKdtsySupGzw+68SZnDwWmVbSdTLDfYnkyfYNJSZqIWemMyJ6dVtkBm9VfnZzmcbEumVzBpKfMsb5qbkukWTAoquqplJsLJtmSaPytdQWYinGzqLTCvYLIr6Gt5V/2rQg1TWE/m0WuVLbgz73z252FzMr2CSUl5noFMsYvMlmROfqtsS5mhhimsJtMtmJTI9HqqvzGZfsGkpAjI4BeKk942JNPtxKS1TLH12oZkOgaTxjKlcLIdmbMnJnddygw0TGEtmY7BpLVMoV/pdmR6BpOCiq43r4/Ol3CyHZmewaS1TCGcbEamazApGAhvIvP/7Z3BUuNIE4QdDvEA4PjvYOMHkAnfFYS5sza8/6v8szA7O7Oo2y1blZndZJ+okxV8UlVnV1VX4kTv+8AMy5gwvsxxcfJtYIYKkwnleXH7rW3/bbrAdjHnpCSY47XQ3yY5HSpMJtSNzPRzCXHyPWD2wV62GOYQ52c3/TeBGStM8DBVhilQYMYKEzxMlWEKFJixwoQAM1lu0D7MaGECh6kyTIEBM+S+mIsqumb70VS5Qfswg4UJAWZGnDQOM1qYlBfOzreDTgfNxmFGC5Pyiq7YPM2nOGkc5l2wMGHATIuTxmFGCxMKzGPKz7YNcx8fMkvrRu5jf/FDnLQNMzpjwoGZFCdNd4HFCxMKTIlhCvjkNMDLlsKccdvVKQxTgMMECBMGzOTVa03DBAgTCsxOYJgCHCZAmBRXdM0KU2CYAhomQphQYCoMU0DDRAiT4sLZx/AXqG2YR4AwKS7PmzdVMy5OGoYZMfpLBeaSPkwBDBMiTDgwE5PeGoYJESbFdSNv8W9QyzDXmJBZCPN13h8dFSftwsQIk2KYgKOKTbsww0u5qDBztdANwjxiQiYJZraBqL0uMJCXLS3PGwC/umk1OY0SJiSYyTHULcJcgYQJDeaCPEwBChMkTIoLZwdE0Fy1CRMlTIrL82aHSR6mgISJyZgQYeYmvTUGc4USJqUw5997ddxhCkCYPc7LltWNBMDkDlMAwoQJEx5M8jAFHEycMCHCTE96awwmTpgUwgzYfKXFSVswgcKECDMpTtqCicqYlJfn3YPeom17MIHChAgzeaLXFkxQKdcEmCHJt5Q4aaoLDClMCgtnH1HRGjVMAQYTKUwKy/MeUT4BNUwBBRMqTJgwU7cbtAQTKkyYMFO3yLQEE5gxKS4CioFJHKYAgrk6YkNmEcw3nFNoCmYPacuUgJmY9NYQTKww4cLkDVPAwFyBhQnVzb7QhimAYIKFSVl5HvJFemoHJlqYcGHmaqEbgAnNmLBhZmuh64eJFiaFhbNRb9OQ8bP1w+yhGZPi8rwBGTRXrcBECxMyzEWmFrr+LrA7uJctqhsZkD/+s1Gz/uQ0WpiwYXakYQoImD1amNBhkoYpIGDChQkbZmZoTfUw8cKkCGbgFuwl6Werh4kXJmyYpGEKAJgEYVJUnhf5DEvKMAUATIIwocPkDFMAwCQIkyKY95G/TxmmEA+TIUyKKroiYSbFSeUwKSGTDTMZNOuGuWIIEz7MVC105TDBpVzlMEPfqJQ4qRvmnuNlOzbM47ifrRrmqDC5XzQPMyVO6u4CowgTAZgDYZhCNEySMCkpAnrDv02rumGShElJEVDwAxCGKUTDJAmTkpP24Fdq/Oq1qmEyMiYaMDv8MIVgmHtSyCw4nI129oRhCsEwdywve/7U4JHhGzY1wyQJkxJtwsnCVQyzp3nZ8c46aOROlxvUCZMmTAp2QPGPkSw3qBPmkRcyz+2A7jmv0z9DayqEScqYlARNwDs1ZIJmfTB5wuR80GQdKZ5qhUkUJuf8LCRyP6eDZn0wecLkrJ99ZL1OP4NmdV1gPdPLLvJtfQPtdao0Oc0UJskNCKbVJVduUCXM1ZEaMrM5TdCWOn27QXUwaRmTs1sglH8YsMMUAmHuySEz82midmHgYQqBMO9osercp4l7CuwwhUCYXGGSOzjoqG/TtkKYPd3LpvzcG/n3K4TJFiaf/8wXrqvHDlOIg8kWJima2BcqNemtMpjcYJWkuT3wt2DVwdwrhMyvNMEsk+KkLpg7TkJ47P85/OvxXw/oX0+Ik7pgCgiTX+swvP/98++vB7xrSEx6qwpmr+Jlf36dh78X4/cTJ3pVdYFJCBOFlSg3qCk5vdIQJgrrGTdMIQqmiDARWMBhCkEw91ohk+pnM/dCVwGT1fwuCXMJG6YQBFNJmCgGzYeKYPb2sr8t2DCFGJgWJueC5qkamBYmRZmTSmBamJwVJ9XAtDA572ergbmzMDl/olcJTAuTYnGiD9PCpFic6MO0MCk+0dPvAruzMPnPAg1TiIDpkFmWOakBpoVJWdCsAebKwqRQnNQA02d5heKk14dpYVIYNNcVwLQwKRYn8jBVhckwMF+obokYpjA/TEFh0h2Gxc376+JwGMSCpjhMPWHSHd5/uftXGs7xoKkNc8WYSZxdh5s/ngXfbZITJ+IwxYTJ711DnD6wjJ/diMNU6zF5Ual5GD/R04apJUy68etGOsIDjYsTbZhSwqR74V7QdTZobrS7wKSESfqS0oNG0HyQTk5LCZOBfN1sYeZEFqZSxiQ72w2vlgDDFGaGKSRMuvz4BHjY7OKHKcwMU6j6eeBOjyoVJ7owhYTJ2SE1jxJ+VhimkDA5O9gNf49f+DCFeWHqCJOCybbwPVBGnAjCFBIm5z9M/JNlJr0JwtTJmBR8mPgAkBEngjB1hMmwXut9mhlxIgiTfsP+r7UsgvkoEDQ/xYkeTB1h0hWxxD9cMmjKwRQq5Xoug7lWiOQnTZgywqRo+6PiZzeSXWBCwqSQJdzPBg9TmBGmjjAp9bJ4Pxs7TGFGmDrCZFkM81HA/28UYcpkTLpilnA/m7rdQA2mjjB5KYcJj+mhwxTmg1mfMGHMswodpjAfzPqECSNohg5TmA2mTvXzhJApI07EYOoIkykhE3/YHjlMYTaYxypDpsiJnhrM2jImUid6YjCFMiZHaZjjQ2u0YOoIk0n7H/wbl62FFoEp1GMyDSZ8x52rhdaAKdSW+SIO8zlTC63RBSbU/P48EaZEGFBKTis1v0+FiQ4GmXuhNWAKCZOJyoTwzsUNU5gHplKPyVEdZtwwhVlgKo3+0oeZmfQmAVNImEyUmYyXLj3pTQGmUvP7ZJj4cBA2TGEWmEr3xVQAM2yYwhwwlZrfa4CZnvSmAFNq9NdUmIR4kBQnAjC1LrKsAGZSnAjA1LouuAKYyRM9AZha1wXXADN1oseHKXaRZQUwk+KED1Pshv0aYA4JP0vvAlO7LrgGmEHDFK6HqZQxqeTQIFluQIcpdsN+HTATV6+xYarNMakDZswwhethagmTGrImi6hhClfDVBv9NTmfycm7jl+9xoYpJkwqSE4ng+aaDVNvwOKyCpghwxSuhimVMUk5MKXqvJw4IcPUG/2lXjd75kSPCFOplCsXjbQOgHInekyYYsLkgvM8EsxcLTTLzcp5WfUusKyf3VBhqgmT6drkXikcbJkwJSe/LytQJot8AxGnC0wrY3LJdvZNyoNsiMlpPWGyEL9t5OyJHg+mUFvmhTsgYoAfkvdCc2AKCpOJO6B7sZfuRIPZK3rZaTugN7Hn3NBgCgqTqUFT7TmvGqZwDUxJYTLtDIj66qUnvTFgymVMJgfNR7nnPJFg7jVD5hSl+Sb3nB/iBA9TMGMy2c9yX73kpDcCTElhMsnPkjVx8uo1gptV9bLlfpb96qXECR6mqDCZ4GfpT5u6eg0OU1aYlJ8b0J82daKHhykqTCacG9CfNiVO4F1ge92QWbgFuuc/baLcAJ6c3skKk9ItUKfpQbYEmLLCpDQPJvBhzjxM4WKYvbKX/fFfeqnhw0xNekPDVBYmRVHzflANBw9wmHfCwqRoQ6vx4s06TOFimMrC5PPTXEof/uSC5gkMc68dMs/uge5VnjVdboCDqS1Mzu+BOuVocOkwhUthHqWFyVmanbb/eILC7PW9bC5sCr12uVpoEEx1YZKn+ab0pJlaaBBMeWGSo/mm9dala6FBMNcVhMxPmjdf42UFm+4VEOa+ipD5+b8a/gxK24PaE6bFCaYLrAJh8u86/IZz28mxHC83wCWnpW7YL8F5uHl/X7+///hD8OmG2YYpXAazHi/7j7M9/FiiT5i+3QACc1+HMKllzTZM4SKYu7q8rPp6mev+/YtgViNM6ljJSW8ImH11IVMc5jLhZxEwd8oppVaC5gMI5p1DJuBEDwTTXhYRNDEwewsThJ89QWBamEDEyQYC887CBOFntxCYR4dMyIkeBGZNGZOagyaiC2zvkIkRJydAcnoneJFlk0FzA4B5Z2GC8bMAmGPd7/ayEeJk28fDtDBB+dl4mL2FCUqcxMPcO2SiguYqHObOIRMVNE/hMO8cMlFBMxzm2GbWXjYmaG7CYTpkwoImA6ZDZkMwHTKDjmfDYfYOmbAd0EP4btYhEwdz6jjNqfnMvXOZOJjRyem99z84bYKH6f1PFMytYVa78DB3rjJo58s0TMP0umA3a5j+Mg3TMA2zbjf7VZq8mkM7J0DWmYbp9d/1NQXms9la1wseZm+YQet5BphX5zN9z0iQMomvNLh1pQFq/wMotXQ/HypkUmA6aM7xYS4J7Qmum41ZA6MLbKyivTOLq9eS0tLnxmnUhwlott3pz5ZoI2KuHzgwTfNKlqNDlQF3GuzHZ/gcjOTidbhZr0lXx4xP19ouDl6XrSExgxcwpGa19sKsnnN1jFfA2gJgjmkTr4C1QcwC2/n/DFknxCywvf/PkIW51tv/Z0jIxMD0DggSMjEwHTQhIZM3PcErIGTS5pp4zbseUDCtNDEhEwLT4gTjZXkjF73mFiYgmPazEC/LG1PsNbuXJQ4Q95r7wwTB9LlB7FoBYfb+NONFJgzmylug6KO8i2BOzmd+mD7SC9Ull0F5uhCmo2bohwmG6agZGTHRMP1pBm5l0TCdow7UmHCY3gMF7X4YMO1o484L8DDtaMMO8ggwvaONOvthwHTYjAiYJJgr0wxhSYF5e9s7bs7JckWFeetd0Izx8pYM8/bpf8Yw24ksG+btk3HOsP76yGhdC/PC1NkfhQdP/btxXBMs/5qBwsXJ6S/mk9c1q5eCaVPBNEzDtGmYNg3TpmEapk3DtGmYNg3TpmEapk3DtEmAeXU+06aMaZiGadMwbRqmTcM0TJuGadMwbRqmTcM0TJuGadMwbRqmzQ+YTgY6OW3TMG0apk3DNEybhmnTMG0apk3DNEybhmnTMG0apk3DdBeYTSenbRqmTcM0TP9jDNOmYdo0TJuGaZg2DdOmYdo0TJuGaZg2lWE6GejktE3DtGmYNg3TMG0apk3DtGmYNg3TMG0apk3DtGmYNg3TXWA2nZy2aZg2DdMw/Y8xTJuGadMwbRqmYdo0TJuGadMwbRqmYdpUhulkoJPTNg3TpmHaNEzDtGmYNg3TpmHaNEzDtGmYNg3TpmHaNEx3gdl0ctqmYdo0TMP0P8YwbRqmTcO0aZiGadMwbRqmTcO0aZiGaVPY/D/TBNsd/7Bo8AAAAABJRU5ErkJggg=='
            images.append(image_base64)
            print("Could not connect to flask api")
    
    new_paths = []
    path = artist.split("/")[0] + "/generated/image ({}).png"
    
    start_counter = 0
    for i in range(1, 100):
        try:
            test_filename = path.format(str(i))
            s3.Object(bucket_name, test_filename).load()
        except:
            start_counter = i
            break
    
    if(start_counter != 0):
        for i in range(0, counter):
            try:
                new_path = path.format(start_counter)
                s3_client = boto3.client('s3')
                s3_client.upload_file(filename.format(i), bucket_name, new_path)
                new_paths.append(new_path)
                
                if (start_counter >= 101):
                    break
            except:
                print("Error writing to S3")
                break
        print(new_paths)
        return new_paths
    else:
        return "Generated is already full"